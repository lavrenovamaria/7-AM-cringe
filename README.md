# 7-AM-cringe

Проект "7-AM-cringe" представляет собой бота для мессенджера Telegram, написанного на Java с использованием библиотеки Telegram Bot Java Library. Основная цель этого бота - автоматическая отправка картинок в определенные телеграм-чаты каждый день в 7 утра по местному времени.

![image](https://user-images.githubusercontent.com/84707645/232034625-f14b9f0f-52a5-442e-bc50-f476ea009f13.png)


Принцип работы бота заключается в следующем:

Бот регистрируется на сервере Telegram и получает уникальный токен, который позволяет ему отправлять и получать сообщения от пользователей.

Я настраиваю время запуска задачи в 7 утра и указываю идентификаторы телеграм-чатов, в которые будут отправляться картинки.

Бот периодически проверяет текущее время и, если оно совпадает с заданным временем отправки, выполняет загрузку картинок из заранее определенного источника, почему-то не удалось разобраться с UTC и установленное время в программе 4:00, в то время как в Москве 7:00.

Загруженные на гугл диск открытки отправляются в указанные телеграм-чаты.

Пользователи чатов получают картинки от бота и могут наслаждаться ими каждый день в 7 утра.

Проект содержит исходный код бота, инструкции по настройке, а также необходимые зависимости для сборки и запуска.

<details>
  <summary> Что происходит </summary>

### Шаги выполнения программы

1. Получение имени файла `ClientSecret.json`.
2. Получение `InputStream` из ресурсов класса `MainController`.
3. Проверка, что `InputStream` не является `null`. Если `null`, выброс исключения `FileNotFoundException`.
4. Создание объекта `StringBuilder` для чтения содержимого `InputStream`.
5. Чтение содержимого `InputStream` построчно и добавление каждой строки в `StringBuilder`.
6. Преобразование содержимого `StringBuilder` в строку `fileContent`.
7. Создание временного файла с префиксом "ClientSecret" и с расширением ".json".
8. Создание объекта `FileWriter` для записи `fileContent` во временный файл.
9. Запись содержимого `fileContent` во временный файл.
10. Получение абсолютного пути к временному файлу.
11. Создание объекта `DriveApiClientImpl` с абсолютным путем к временному файлу.
12. Создание объекта `CommandController`.
13. Создание объекта `TelegramBot` с использованием `commandController`.
14. Создание объекта `ImageService` с использованием `bot` и `driveApiClient`.
15. Регистрация команд "/start" и "/stop" в `commandController`.
16. Создание объекта `TelegramBotsApi` с использованием `DefaultBotSession.class`.
17. Регистрация бота (`bot`) в `botsApi`.
18. Создание объекта `DayTime` с временем "5:00".
19. Запланирование задачи для выполнения каждый день в указанное время:
    - Получение списка чатов из `commandController`.
    - Отправка изображений в телеграм для каждого чата из списка чатов с помощью `imageService`.

### Запуск программы

Для запуска программы выполните команду:

```
java -jar telegram-bot-master-bitty-1.0-SNAPSHOT.jar
```

### Примечания

- При запуске программы, она будет ожидать ввода команд от пользователей через Telegram.
- Вам также необходимо обеспечить наличие файла `ClientSecret.json` в папке `src/main/resources`, так как он используется для аутентификации в Google Drive API.

</details>